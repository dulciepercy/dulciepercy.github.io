<!DOCTYPE html>
<html>
<head>
<style>
header {
  background-color: #666;
  padding: 30px;
  text-align: center;
  font-size: 35px;
  color: white;
}	
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;

}

/* Create two columns/boxes that floats next to each other */
nav {
  float: left;
  width: 60%;
  height: 40%;
  background: rgb(118, 113, 143);
  padding: 20px;
  overflow:scroll;

}

article {
  float: left;
  padding: 20px;
  width: 30%;
  background-color: #f1f1f1;
  position: -webkit-sticky; /* Safari */
  position: sticky;
  top: 0;

}

/* Clear floats after the columns */
section::after {
  content: "";
  display: table;
  clear: both;
}

/* Style the footer */
footer {
  background-color: #777;
  padding: 10px;
  text-align: center;
  color: white;
}

/* Responsive layout - makes the two columns/boxes stack on top of each other instead of next to each other, on small screens */
@media (max-width: 600px) {
  nav, article {
    width: 100%;
    height: auto;
  }

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
  width:auto;
  white-space: nowrap;
}

tr:nth-child(even) {
  background-color: #dddddd;
}


</style>
<script> 

	let audioIN = { audio: true }; 
	// audio is true, for recording 

	// Access the permission for use 
	// the microphone 
	navigator.mediaDevices.getUserMedia(audioIN) 

	// 'then()' method returns a Promise 
	.then(function (mediaStreamObj) { 

		// Connect the media stream to the 
		// first audio element 
		let audio = document.querySelector('audio'); 
		//returns the recorded audio via 'audio' tag 

		// 'srcObject' is a property which 
		// takes the media object 
		// This is supported in the newer browsers 
		if ("srcObject" in audio) { 
		audio.srcObject = mediaStreamObj; 
		} 
		else { // Old version 
		audio.src = window.URL 
			.createObjectURL(mediaStreamObj); 
		} 

		// It will play the audio 
		audio.onloadedmetadata = function (ev) { 

		// Play the audio in the 2nd audio 
		// element what is being recorded 
		//audio.play(); 
		}; 

		// Start record 
		let start = document.getElementById('btnStart'); 

		// Stop record 
		let stop = document.getElementById('btnStop'); 

		// 2nd audio tag for play the audio 
		let playAudio = document.getElementById('adioPlay'); 

		// This is the main thing to recorde 
		// the audio 'MediaRecorder' API 
		let mediaRecorder = new MediaRecorder(mediaStreamObj); 
		// Pass the audio stream 

		// Start event 
		start.addEventListener('click', function (ev) { 
		mediaRecorder.start(); 
		console.log(mediaRecorder.state); 
		}) 

		// Stop event 
		stop.addEventListener('click', function (ev) { 
		mediaRecorder.stop(); 
		console.log(mediaRecorder.state); 
		}); 

		// If audio data available then push 
		// it to the chunk array 
		mediaRecorder.ondataavailable = function (ev) { 
		dataArray.push(ev.data); 
		} 

		// Chunk array to store the audio data 
		let dataArray = []; 

		// Convert the audio data in to blob 
		// after stopping the recording 
		mediaRecorder.onstop = function (ev) { 

		// blob of type mp3 
		let audioData = new Blob(dataArray, 
					{ 'type': 'audio/mp3;' }); 
			
		// After fill up the chunk 
		// array make it empty 
		dataArray = []; 

		// Creating audio url with reference 
		// of created blob named 'audioData' 
		let audioSrc = window.URL 
			.createObjectURL(audioData); 

		// Pass the audio url to the 2nd video tag 
		playAudio.src = audioSrc; 
		console.log(playAudio.state); 

		} 
	}) 

	// If any error occurs then handles the error 
	.catch(function (err) { 
		console.log(err.name, err.message); 
	}); 
</script> 
</head>

<body>
<h2>Sonia can speak Chinese</h2>
<section>
<nav>
<table>
  <tr>
    <th>Filename_of_Recording</th>
    <th>Play_Controls</th>
    <th>Click_to_Start_Recording</th>
    <th>Click_to_Stop</th>
  </tr>
<tbody>
  <tr>
    <td>01 第1课 课文一</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    <td  id="btnStart" rowspan = 20 style="width:100%;height:100%;background-color: blueviolet;">Click to Start <!-- button id="btnStart"  style="width:100%;height:100%">START RECORDING</button--> </td>
    <td  id="btnStop" rowspan = 20 style="width:100%;height:100%;background-color: chartreuse;">Click to Stop <!--button id="btnStop" style="width:100%;height:100%">STOP RECORDING</button--> </td>>
  </tr>
    <tr>
    <td>01 第1课 课文一_01.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_01.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_02.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_02.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_03.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_03.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_04.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_04.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_05.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_05.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_06.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_06.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_07.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_07.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_08.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_08.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_09.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_09.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_10.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_10.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_11.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_11.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_12.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_12.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_13.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_13.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_14.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_14.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_15.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_15.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_16.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_16.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
    <tr>
    <td>01 第1课 课文一_17.mp3</td>
    <td><audio controls> <source src="audio/B1L01N01/01 第1课 课文一_17.mp3" type="audio/mpeg">Audio tag is not supported in this browser.</audio></td>
    </tr>
</tbody>
</table>
</nav>
<article>
	<audio id="adioPlay" controls ></audio> 
</article>
</section>
</body>
</html>
